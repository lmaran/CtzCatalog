(function(){var n=angular.module("angularFileUpload",[]);n.service("$upload",["$http","$q","$timeout",function(n,t,i){function r(r){var f,u;return r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(t,i){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:n.defaults.transformRequest[0](t,i)},f=t.defer(),window.XMLHttpRequest.__isShim&&(r.headers.__setXHR_=function(){return function(n){n&&(r.__XHR=n,r.xhrFn&&r.xhrFn(n),n.upload.addEventListener("progress",function(n){f.notify(n)},!1),n.upload.addEventListener("load",function(n){n.lengthComputable&&f.notify(n)},!1))}}),n(r).then(function(n){f.resolve(n)},function(n){f.reject(n)},function(n){f.notify(n)}),u=f.promise,u.success=function(n){return u.then(function(t){n(t.data,t.status,t.headers,r)}),u},u.error=function(n){return u.then(null,function(t){n(t.data,t.status,t.headers,r)}),u},u.progress=function(n){return u.then(null,null,function(t){n(t)}),u},u.abort=function(){return r.__XHR&&i(function(){r.__XHR.abort()}),u},u.xhr=function(n){return r.xhrFn=function(t){return function(){t&&t.apply(u,arguments);n.apply(u,arguments)}}(r.xhrFn),u},u}this.upload=function(t){t.headers=t.headers||{};t.headers["Content-Type"]=undefined;t.transformRequest=t.transformRequest||n.defaults.transformRequest;var f=new FormData,u=t.transformRequest,i=t.data;return t.transformRequest=function(n,r){var o,e,h,s,c,f;if(i)if(t.formDataAppender)for(o in i)e=i[o],t.formDataAppender(n,o,e);else for(o in i){if(e=i[o],typeof u=="function")e=u(e,r);else for(f=0;f<u.length;f++)h=u[f],typeof h=="function"&&(e=h(e,r));n.append(o,e)}if(t.file!=null)if(s=t.fileFormDataName||"file",Object.prototype.toString.call(t.file)==="[object Array]")for(c=Object.prototype.toString.call(s)==="[object String]",f=0;f<t.file.length;f++)n.append(c?s:s[f],t.file[f],t.fileName&&t.fileName[f]||t.file[f].name);else n.append(s,t.file,t.fileName||t.file.name);return n},t.data=f,r(t)};this.http=function(n){return r(n)}}]);n.directive("ngFileSelect",["$parse","$timeout",function(n,t){return function(i,r,u){var s=n(u.ngFileSelect),f,o,e;if(r[0].tagName.toLowerCase()!=="input"||(r.attr("type")&&r.attr("type").toLowerCase())!=="file"){for(f=angular.element('<input type="file">'),o=r[0].attributes,e=0;e<o.length;e++)o[e].name.toLowerCase()!=="type"&&f.attr(o[e].name,o[e].value);u.multiple&&f.attr("multiple","true");f.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden");f.attr("__wrapper_for_parent_",!0);r.append(f);r[0].__file_click_fn_delegate_=function(){f[0].click()};r.bind("click",r[0].__file_click_fn_delegate_);r.css("overflow","hidden");r=f}r.bind("change",function(n){var f=[],r,u;if(r=n.__files_||n.target.files,r!=null)for(u=0;u<r.length;u++)f.push(r.item(u));t(function(){s(i,{$files:f,$event:n})})})}}]);n.directive("ngFileDropAvailable",["$parse","$timeout",function(n,t){return function(i,r,u){if("draggable"in document.createElement("span")){var f=n(u.ngFileDropAvailable);t(function(){f(i)})}}}]);n.directive("ngFileDrop",["$parse","$timeout","$location",function(n,t,i){return function(r,u,f){var o,s,e;if("draggable"in document.createElement("span")){o=null;u[0].addEventListener("dragover",function(i){if(i.preventDefault(),t.cancel(o),!u[0].__drag_over_class_)if(f.ngFileDragOverClass&&f.ngFileDragOverClass.search(/\) *$/)>-1){var e=n(f.ngFileDragOverClass)(r,{$event:i});u[0].__drag_over_class_=e}else u[0].__drag_over_class_=f.ngFileDragOverClass||"dragover";u.addClass(u[0].__drag_over_class_)},!1);u[0].addEventListener("dragenter",function(n){n.preventDefault()},!1);u[0].addEventListener("dragleave",function(){o=t(function(){u.removeClass(u[0].__drag_over_class_);u[0].__drag_over_class_=null},f.ngFileDragOverDelay||1)},!1);s=n(f.ngFileDrop);u[0].addEventListener("drop",function(n){n.preventDefault();u.removeClass(u[0].__drag_over_class_);u[0].__drag_over_class_=null;l(n,function(t){s(r,{$files:t,$event:n})})},!1);function c(n){return/^[\000-\177]*$/.test(n)}function l(n,r){var o=[],f=n.dataTransfer.items,s,l,u;if(f&&f.length>0&&f[0].webkitGetAsEntry&&i.protocol()!="file"&&f[0].webkitGetAsEntry().isDirectory)for(u=0;u<f.length;u++)s=f[u].webkitGetAsEntry(),s!=null&&(c(s.name)?h(o,s):f[u].webkitGetAsEntry().isDirectory||o.push(f[u].getAsFile()));else if(l=n.dataTransfer.files,l!=null)for(u=0;u<l.length;u++)o.push(l.item(u));(function a(n){t(function(){e?a(10):r(o)},n||0)})()}e=0;function h(n,t,i){if(t!=null)if(t.isDirectory){var r=t.createReader();e++;r.readEntries(function(r){for(var u=0;u<r.length;u++)h(n,r[u],(i?i:"")+t.name+"/");e--})}else e++,t.file(function(t){e--;t._relativePath=(i?i:"")+t.name;n.push(t)})}}}}])})();
//# sourceMappingURL=angular-file-upload.min.js.map
