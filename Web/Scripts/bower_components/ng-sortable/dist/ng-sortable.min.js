(function(){"use strict";angular.module("ui.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden"})})(),function(){"use strict";var n=angular.module("ui.sortable");n.factory("$helper",["$document","$window",function(n,t){return{height:function(n){return n.prop("offsetHeight")},width:function(n){return n.prop("offsetWidth")},offset:function(i,r){var u=i[0].getBoundingClientRect();return r||(r=n[0].documentElement),{width:u.width||i.prop("offsetWidth"),height:u.height||i.prop("offsetHeight"),top:u.top+(t.pageYOffset||r.scrollTop-r.offsetTop),left:u.left+(t.pageXOffset||r.scrollLeft-r.offsetLeft)}},eventObj:function(n){var t=n;return n.targetTouches!==undefined?t=n.targetTouches.item(0):n.originalEvent!==undefined&&n.originalEvent.targetTouches!==undefined&&(t=n.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(n){var t=!1;return n.touches!==undefined&&n.touches.length>1?t=!0:n.originalEvent!==undefined&&n.originalEvent.touches!==undefined&&n.originalEvent.touches.length>1&&(t=!0),t},positionStarted:function(n,t,i){var r={};return r.offsetX=n.pageX-this.offset(t,i).left,r.offsetY=n.pageY-this.offset(t,i).top,r.startX=r.lastX=n.pageX,r.startY=r.lastY=n.pageY,r.nowX=r.nowY=r.distX=r.distY=r.dirAx=0,r.dirX=r.dirY=r.lastDirX=r.lastDirY=r.distAxX=r.distAxY=0,r},calculatePosition:function(n,t){n.lastX=n.nowX;n.lastY=n.nowY;n.nowX=t.pageX;n.nowY=t.pageY;n.distX=n.nowX-n.lastX;n.distY=n.nowY-n.lastY;n.lastDirX=n.dirX;n.lastDirY=n.dirY;n.dirX=n.distX===0?0:n.distX>0?1:-1;n.dirY=n.distY===0?0:n.distY>0?1:-1;var i=Math.abs(n.distX)>Math.abs(n.distY)?1:0;n.dirAx!==i?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),n.dirX!==0&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),n.dirY!==0&&n.dirY!==n.lastDirY&&(n.distAxY=0));n.dirAx=i},movePosition:function(n,t,i,r,u,f){var e,o=u==="relative";t.x=n.pageX-i.offsetX;t.y=n.pageY-i.offsetY;r&&(e=this.offset(r,f),o&&(t.x-=e.left,t.y-=e.top,e.left=0,e.top=0),t.x<e.left?t.x=e.left:t.x>=e.width+e.left-this.offset(t).width&&(t.x=e.width+e.left-this.offset(t).width),t.y<e.top?t.y=e.top:t.y>=e.height+e.top-this.offset(t).height&&(t.y=e.height+e.top-this.offset(t).height));t.css({left:t.x+"px",top:t.y+"px"});this.calculatePosition(i,n)},dragItem:function(n){return{index:n.index(),parent:n.sortableScope,source:n,sourceInfo:{index:n.index(),itemScope:n.itemScope,sortableScope:n.sortableScope},moveTo:function(n,t){this.parent=n;this.isSameParent()&&this.source.index()<t&&(t=t-1);this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index);this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(n){return n.attr("no-drag")!==undefined||n.attr("data-no-drag")!==undefined}}}])}(),function(){"use strict";var n=angular.module("ui.sortable");n.controller("ui.sortable.sortableController",["$scope",function(n){this.scope=n;n.modelValue=null;n.callbacks=null;n.type="sortable";n.options={};n.isDisabled=!1;n.insertItem=function(t,i){n.safeApply(function(){n.modelValue.splice(t,0,i)})};n.removeItem=function(t){var i=null;return t>-1&&n.safeApply(function(){i=n.modelValue.splice(t,1)[0]}),i};n.isEmpty=function(){return n.modelValue&&n.modelValue.length===0};n.accept=function(t,i,r){return n.callbacks.accept(t,i,r)};n.safeApply=function(n){var t=this.$root.$$phase;t==="$apply"||t==="$digest"?n&&typeof n=="function"&&n():this.$apply(n)}}]);n.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(n,t,i,r){var f,u;(f=r,f)&&(f.$render=function(){f.$modelValue&&angular.isArray(f.$modelValue)||f.$setViewValue([]);n.modelValue=f.$modelValue},n.element=t,u={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragCancel:null,dragEnd:null},u.accept=function(){return!0},u.orderChanged=function(){},u.itemMoved=function(){},u.dragStart=function(){},u.dragCancel=function(){},u.dragEnd=function(){},n.$watch(i.asSortable,function(t){angular.forEach(t,function(t,i){u[i]?typeof t=="function"&&(u[i]=t):n.options[i]=t});n.callbacks=u},!0),angular.isDefined(i.isDisabled)&&n.$watch(i.isDisabled,function(t){angular.isUndefined(t)||(n.isDisabled=t)},!0))}}})}(),function(){"use strict";var n=angular.module("ui.sortable");n.controller("ui.sortable.sortableItemHandleController",["$scope",function(n){this.scope=n;n.itemScope=null;n.type="handle"}]);n.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(n,t,i,r){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"ui.sortable.sortableItemHandleController",link:function(u,f,e,o){function ct(n,t){n[0].parentNode.insertBefore(c[0],n[0]);h.moveTo(t.sortableScope,t.index())}function lt(n,t){n.after(c);h.moveTo(t.sortableScope,t.index()+1)}function at(){b.replaceWith(u.itemScope.element);c.remove();s.remove();s=null;v=!1;a.css("cursor","")}var s,c,b,l,h,a,nt,y,k,ut,p,w,d,ft,et,ot,tt,st,ht,it,g,v,rt=!1;g=i.hasOwnProperty("ontouchstart");n.handleClass&&f.addClass(n.handleClass);u.itemScope=o.scope;u.$watch("sortableScope.isDisabled",function(n){rt!==n&&(rt=n,rt?st():tt())});y=function(n){var i=function(){angular.element(r).unbind("mousemove",e);angular.element(r).unbind("touchmove",e);f.unbind("mouseup",i);f.unbind("touchend",i);f.unbind("touchcancel",i)},u,e=function(r){r.preventDefault();var f=t.eventObj(r);u||(u={clientX:f.clientX,clientY:f.clientY});Math.abs(f.clientX-u.clientX)+Math.abs(f.clientY-u.clientY)>10&&(i(),ut(n))};angular.element(r).bind("mousemove",e);angular.element(r).bind("touchmove",e);f.bind("mouseup",i);f.bind("touchend",i);f.bind("touchcancel",i)};ut=function(i){var f,e;(g||i.button!==2&&i.which!==3)&&(g&&t.isTouchInvalid(i)||!v&&ft(i)&&(v=!0,i.preventDefault(),f=t.eventObj(i),k=angular.element(r[0].querySelector(u.sortableScope.options.scrollableContainer)).length>0?r[0].querySelector(u.sortableScope.options.scrollableContainer):r[0].documentElement,a=angular.element(r[0].querySelector(u.sortableScope.options.containment)).length>0?angular.element(r[0].querySelector(u.sortableScope.options.containment)):angular.element(r[0].body),a.css("cursor","move"),nt=u.sortableScope.options.containerPositioning||"absolute",h=t.dragItem(u),e=u.itemScope.element.prop("tagName"),s=angular.element(r[0].createElement(u.sortableScope.element.prop("tagName"))).addClass(u.sortableScope.element.attr("class")).addClass(n.dragClass),s.css("width",t.width(u.itemScope.element)+"px"),s.css("height",t.height(u.itemScope.element)+"px"),c=angular.element(r[0].createElement(e)).addClass(n.placeHolderClass).addClass(u.sortableScope.options.additionalPlaceholderClass),c.css("width",t.width(u.itemScope.element)+"px"),c.css("height",t.height(u.itemScope.element)+"px"),b=angular.element(r[0].createElement(e)),n.hiddenClass&&b.addClass(n.hiddenClass),l=t.positionStarted(f,u.itemScope.element,k),u.itemScope.element.after(c),u.itemScope.element.after(b),s.append(u.itemScope.element),a.append(s),t.movePosition(f,s,l,a,nt,k),u.sortableScope.$apply(function(){u.callbacks.dragStart(h.eventArgs())}),ht()))};ft=function(n){var i,r,u;for(i=angular.element(n.target),r=i.scope(),u=!1;!u&&r!==undefined;)r.type&&r.type==="handle"?u=!0:r=r.$parent;while(u&&i[0]!==f[0])t.noDrag(i)&&(u=!1),i=i.parent();return u};p=function(f){var y,p,w,e,o;if((!g||!t.isTouchInvalid(f))&&v&&s){if(f.preventDefault(),y=t.eventObj(f),t.movePosition(y,s,l,a,nt,k),p=y.pageX-r[0].documentElement.scrollLeft,w=y.pageY-(i.pageYOffset||r[0].documentElement.scrollTop),s.addClass(n.hiddenClass),r[0].elementFromPoint(p,w),o=angular.element(r[0].elementFromPoint(p,w)),s.removeClass(n.hiddenClass),e=o.scope(),!e||!e.type)return;if(e.type==="handle"&&(e=e.itemScope),e.type!=="item"&&e.type!=="sortable")return;e.type==="item"&&(o=e.element,e.sortableScope.accept(u,e.sortableScope,e)&&(l.dirAx&&u.itemScope.sortableScope.$id===e.sortableScope.$id?(l.distAxX=0,l.distX<0?ct(o,e):l.distX>0&&lt(o,e)):et(y,o)?ct(o,e):lt(o,e)));e.type==="sortable"&&e.accept(u,e)&&o[0].parentNode!==e.element[0]&&(ot(o)||(o[0].appendChild(c[0]),h.moveTo(e,e.modelValue.length)))}};ot=function(t){for(var u,r=t.children(),i=0;i<r.length;i+=1)if(angular.element(r[i]).hasClass(n.placeHolderClass)){u=!0;break}return u};et=function(n,i){var u,r;return u=!1,r=t.offset(i),t.offset(c).top>r.top?t.offset(s).top<r.top+t.height(i)/2:n.pageY<r.top};w=function(n){v&&(n.preventDefault(),s&&(at(),h.apply(),u.sortableScope.$apply(function(){h.isSameParent()?h.isOrderChanged()&&u.callbacks.orderChanged(h.eventArgs()):u.callbacks.itemMoved(h.eventArgs())}),u.sortableScope.$apply(function(){u.callbacks.dragEnd(h.eventArgs())}),h=null),it())};d=function(n){v&&(n.preventDefault(),s&&(at(),u.sortableScope.$apply(function(){u.callbacks.dragCancel(h.eventArgs())}),h=null),it())};tt=function(){f.bind("touchstart",y);f.bind("mousedown",y)};st=function(){f.unbind("touchstart",y);f.unbind("mousedown",y)};tt();angular.element(r[0].body).bind("keydown",function(n){n.keyCode===27&&d(n)});ht=function(){angular.element(r).bind("touchmove",p);angular.element(r).bind("touchend",w);angular.element(r).bind("touchcancel",d);angular.element(r).bind("mousemove",p);angular.element(r).bind("mouseup",w)};it=function(){angular.element(r).unbind("touchend",w);angular.element(r).unbind("touchcancel",d);angular.element(r).unbind("touchmove",p);angular.element(r).unbind("mouseup",w);angular.element(r).unbind("mousemove",p)}}}}])}(),function(){"use strict";var n=angular.module("ui.sortable");n.controller("ui.sortable.sortableItemController",["$scope",function(n){this.scope=n;n.sortableScope=null;n.modelValue=null;n.type="item";n.index=function(){return n.sortableScope.modelValue.indexOf(n.modelValue)};n.itemData=function(){return n.sortableScope.modelValue[n.$index]}}]);n.directive("asSortableItem",["sortableConfig",function(n){return{require:"^asSortable",restrict:"A",controller:"ui.sortable.sortableItemController",link:function(t,i,r,u){n.itemClass&&i.addClass(n.itemClass);t.sortableScope=u.scope;t.modelValue=u.scope.modelValue[t.$index];t.element=i}}}])}();
//# sourceMappingURL=ng-sortable.min.js.map
